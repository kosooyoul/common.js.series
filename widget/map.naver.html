<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
<title>Naver Map</title>
<style>
html, body, #map {
  width: 100%; height: 100%; margin: 0px; padding: 0px;
}
#map h3 {
  font-size: 20px; color: #26304d; padding: 0; margin: 50px 0 0;
}
#map p {
  margin: 0; font-size: 12px; color: #333; margin: 18px 0;
}
</style>
<script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?clientId=gslXaXtCXg7PmVe9kBey"></script>
</head>
<body>
<div id="map"></div>
<script>
(function() {
  var _params = params();
  _params['lat'] = Number(_params['lat']) || 37.3595704;
  _params['lng'] = Number(_params['lng']) || 127.105399;
  _params['zoom'] = Number(_params['zoom']) || 10;
  _params['marker'] = _params['marker'] != 'no';
  _params['control'] = _params['control'] == 'yes';
  _params['title'] = _params['title'];
  _params['description'] = _params['description'];

  var map = new naver.maps.Map('map', {
    center: new naver.maps.LatLng(_params['lat'], _params['lng']),
    zoom: _params['zoom']
  });

  var marker = new naver.maps.Marker({
    position: new naver.maps.LatLng(_params['lat'], _params['lng']),
    map: map,
    scaleControl: _params['control'],
    logoControl: _params['control'],
    mapDataControl: _params['control'],
    zoomControl: _params['control']
  });

  if (_params['title'] || _params['description']) {
    var div = document.createElement('div');
    var h3 = document.createElement('h3');
    var p = document.createElement('p');
    h3.innerText = _params['title'];
    p.innerText = _params['description'];
    div.appendChild(h3);
    div.appendChild(p);
    
    var infowindow = new naver.maps.InfoWindow({
      content: div.outerHTML
    });
    infowindow.open(map, marker);

    naver.maps.Event.addListener(marker, "click", function(e) {
      if (infowindow.getMap()) {
        infowindow.close();
      } else {
        infowindow.open(map, marker);
      }
    });
  }

  function params() {
    var obj = {}, pairs = location.search.substr(1).split('&');
    for(var i in pairs) {
      var split = pairs[i].split('=');
      obj[decodeURIComponent(split[0])] = decodeURIComponent(split[1]);
    }
    return obj;
  }
})();
</script>
</body>
</html>
